set -g set-clipboard on

set -a terminal-features "tmux-256color:RGB"

# Quality of Life
set -g prefix C-Space
set -g base-index 1
set -g renumber-windows on
set -g mode-keys vi
set -sg escape-time 1                   # We want instant resolution but != 0 to prevent sixel image bug

# Style
set -g status-position top
set -g status-justify centre
set -g status-left-length 20
set -g status-style "bg=default"
set -g window-status-current-style "fg=blue bold"
set -g status-right "                 "  # To make the windows more absolutely centered

# Keys not bound to anything by default: a, b, e, f, g, h, j, k, r, u, v, x, y
# Keys still not taken after custom mappings: a, e, j, k, u, v, x
 
# Session Window Pane management
bind & kill-window
bind x kill-pane
bind X kill-session
bind -T choose-session x run-shell "tmux kill-session -t '%%'"
bind O kill-pane -a
bind y split-window -c "#{pane_current_path}" "#{pane_current_command}"

# Pane movement
# bind j 
# bind k
bind N previous-window

# Utils
bind r source-file "$HOME/.config/tmux/tmux.conf" \; display-message "reloaded"
bind E show-environment -g
bind b set -g status

# Github
bind g run-shell "$HOME/.config/scripts/open-github.sh"
bind G neww -n "lazygit" lazygit 

# Session init shortcuts
bind f run-shell "tmux neww ~/.config/scripts/tmux-session-dispensary.sh"
bind h run-shell "~/.config/scripts/tmux-session-dispensary.sh ~"
bind K run-shell "~/.config/scripts/tmux-session-dispensary.sh ~/.ssh"
bind S run-shell "~/.config/scripts/tmux-session-dispensary.sh ~/.config/scripts"
bind v run-shell "~/.config/scripts/tmux-session-dispensary.sh ~/.config/nvim"
bind D run-shell "~/.config/scripts/tmux-session-dispensary.sh ~/documents"
bind W run-shell "~/.config/scripts/tmux-session-dispensary.sh ~/downloads"
bind P run-shell "~/.config/scripts/tmux-session-dispensary.sh ~/projects"
bind N run-shell "~/.config/scripts/tmux-session-dispensary.sh ~/notes"
bind y new-session -Ad -s '#{b:pane_current_path}' \; \
       move-window -s '#{session_name}:#{window_index}' -t '#{b:pane_current_path}:' \; \
       kill-window -t '#{b:pane_current_path}:0' \; \
       switch-client -t '#{b:pane_current_path}'

# Copy mode matches vim
unbind -T copy-mode-vi v
bind   -T copy-mode-vi v send-keys -X begin-selection
unbind -T copy-mode-vi y
bind   -T copy-mode-vi y send-keys -X copy-selection-and-cancel
